Scaling test:

cctbx.python test_G.py test_data/PSI_simulated_observations_400.db ref_G=test_data/G_reference_400.db ref_I=test_data/I_reference_400.db eps=10 method=G_wI_LM
xscale {
  method = G_only G_cycles G_wI *G_wI_LM
  eps = 10  # convergence threshold
  n_cycles = 10 # number of minimization cycles (only for G cycles method)
  ref_G = test_data/G_reference_400.db  # reference Gm's
  ref_I = test_data/I_reference_400.db  # reference Ih's
  plot = *No Yes # choose to plot the correlation between the model and the reference
}


This code is to test scaling using the following methods:
1- "G_only" G only method (Gm's are refined and Ih(Gm) is a function of G(m))
2- "G_cycles" G cycles where Ih's are treated as constants and after each cyle of refining G the value of Ih is updated
3- "G_wI" I and G are refined together as independent variables
4- "G_wI_LM" I and G are refined together as independent variables using LM algorithm




Generating test data:
In the test_data directory you may run:
cctbx.python generate_f_calc.py <number of frames> <resoultion>
This will generate a .db file that contains observations generated by multiplying the structure factor obtained from PSI model (PDB ID:1JB0) by a random scale factor.
It will also generated I_reference_n_frames.db and G_reference_n_frames.db. These files contain the reference intensities Ih's and scale factors Gm's.



